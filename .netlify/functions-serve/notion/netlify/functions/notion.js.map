{
  "version": 3,
  "sources": ["../../../../Documents/projetos/fsm02/netlify/functions/notion.js"],
  "sourceRoot": "C:/Users/JOYCE/AppData/Local/Temp/tmp-8384-E64Y0cP2JAYh",
  "sourcesContent": ["export async function handler(event, context) {\r\n  console.log('--- EXECUTANDO A FUN\u00C7\u00C3O notion.js (VERS\u00C3O COMPLETA) ---');\r\n  const databaseId = process.env.VITE_NOTION_DATABASE_ID;\r\n  const token = process.env.VITE_NOTION_TOKEN;\r\n\r\n  console.log('Database ID lido do .env na fun\u00E7\u00E3o:', databaseId);\r\n  console.log('Token lido do .env na fun\u00E7\u00E3o:', token);\r\n\r\n  if (event.httpMethod === 'OPTIONS') {\r\n    return {\r\n      statusCode: 200,\r\n      headers: {\r\n        'Access-Control-Allow-Origin': '*',\r\n        'Access-Control-Allow-Headers': 'Content-Type',\r\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS'\r\n      },\r\n      body: ''\r\n    };\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(`https://api.notion.com/v1/databases/${databaseId}/query`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Authorization\": `Bearer ${token}`,\r\n        \"Notion-Version\": \"2022-06-28\", // Voc\u00EA pode considerar atualizar esta vers\u00E3o para a mais recente se desejar\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        filter: {\r\n          property: \"slug\", // Nome da sua coluna 'slug'\r\n          title: { equals: \"landing\" } // Filtro para o tipo 'Title' com valor 'landing'\r\n        }\r\n      })\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    console.log('Dados recebidos do Notion na fun\u00E7\u00E3o Netlify (COM FILTRO):', JSON.stringify(data, null, 2));\r\n\r\n    return {\r\n      statusCode: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Access-Control-Allow-Origin': '*'\r\n      },\r\n      body: JSON.stringify(data)\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Erro na API interna:\", error);\r\n    return {\r\n      statusCode: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Access-Control-Allow-Origin': '*'\r\n      },\r\n      body: JSON.stringify({ error: \"Erro ao buscar dados\" })\r\n    };\r\n  }\r\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAsB,QAAQ,OAAO,SAAS;AAC5C,UAAQ,IAAI,kEAAyD;AACrE,QAAM,aAAa,QAAQ,IAAI;AAC/B,QAAM,QAAQ,QAAQ,IAAI;AAE1B,UAAQ,IAAI,6CAAuC,UAAU;AAC7D,UAAQ,IAAI,uCAAiC,KAAK;AAElD,MAAI,MAAM,eAAe,WAAW;AAClC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,+BAA+B;AAAA,QAC/B,gCAAgC;AAAA,QAChC,gCAAgC;AAAA,MAClC;AAAA,MACA,MAAM;AAAA,IACR;AAAA,EACF;AAEA,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,uCAAuC,UAAU,UAAU;AAAA,MACtF,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,iBAAiB,UAAU,KAAK;AAAA,QAChC,kBAAkB;AAAA;AAAA,QAClB,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,QAAQ;AAAA,UACN,UAAU;AAAA;AAAA,UACV,OAAO,EAAE,QAAQ,UAAU;AAAA;AAAA,QAC7B;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,OAAO,MAAM,SAAS,KAAK;AAEjC,YAAQ,IAAI,mEAA6D,KAAK,UAAU,MAAM,MAAM,CAAC,CAAC;AAEtG,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU,IAAI;AAAA,IAC3B;AAAA,EACF,SAAS,OAAO;AACd,YAAQ,MAAM,wBAAwB,KAAK;AAC3C,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,OAAO,uBAAuB,CAAC;AAAA,IACxD;AAAA,EACF;AACF;",
  "names": []
}
